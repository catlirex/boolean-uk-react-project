import create from "zustand";
import { createAPILink } from "./API";

const useStore = create((set, get) => ({
  modal: "",
  setModal: (modal) => set({ modal }),
  closeModal: () => set({ modal: "" }),
  searchResult: [
    {
      duration: "00:35:00",
      route_parts: [
        {
          mode: "foot",
          from_point_name: "specified point, Newington (London)",
          from_point: {
            place: null,
          },
          to_point_name: "Bricklayer's Arms",
          to_point: {
            place: null,
          },
          destination: "",
          destination_point: {
            place: null,
          },
          line_name: "",
          duration: "00:08:00",
          departure_time: "10:23",
          arrival_time: "10:31",
          departure_datetime: "2021-07-06T10:23:00+01:00",
          arrival_datetime: "2021-07-06T10:31:00+01:00",
          coordinates: [
            [51.49661, -0.08287],
            [51.4966, -0.08289],
            [51.49658, -0.08292],
            [51.49626, -0.08355],
            [51.49559, -0.08459],
            [51.49516, -0.08432],
            [51.49507, -0.08422],
            [51.49501, -0.08431],
            [51.49481, -0.08465],
            [51.49461, -0.08483],
            [51.49449, -0.08493],
            [51.49424, -0.08502],
            [51.49413, -0.08512],
            [51.49404, -0.08523],
            [51.49396, -0.08556],
            [51.49383, -0.08529],
            [51.49354, -0.08482],
            [51.49367, -0.0852],
          ],
        },
        {
          mode: "bus",
          from_point_name: "Bricklayer's Arms",
          from_point: {
            place: {
              type: "bus_stop",
              name: "Bricklayer's Arms (Stop BQ) - W-bound",
              latitude: 51.49362,
              longitude: -0.08523,
              accuracy: 20,
              atcocode: "490004315BQ",
              description: "Newington, London",
            },
          },
          to_point_name: "St Thomas' Hospital / County Hall",
          to_point: {
            place: {
              type: "bus_stop",
              name: "St Thomas' Hospital  County Hall (Stop D) - W-bound",
              latitude: 51.50072,
              longitude: -0.11937,
              accuracy: 20,
              atcocode: "490005646D",
              description: "Waterloo, London",
            },
          },
          destination: "Marylebone",
          destination_point: {
            place: null,
          },
          line_name: "453",
          duration: "00:22:00",
          departure_time: "10:31",
          arrival_time: "10:53",
          departure_datetime: "2021-07-06T10:31:00+01:00",
          arrival_datetime: "2021-07-06T10:53:00+01:00",
          coordinates: [
            [51.49367, -0.08518],
            [51.49376, -0.08543],
            [51.4938, -0.08563],
            [51.49391, -0.0862],
            [51.49407, -0.08716],
            [51.49411, -0.08897],
            [51.49411, -0.08939],
            [51.49413, -0.09019],
            [51.49413, -0.09024],
            [51.49413, -0.09024],
            [51.49414, -0.09127],
            [51.49418, -0.0918],
            [51.49417, -0.09283],
            [51.49415, -0.09415],
            [51.49422, -0.09465],
            [51.49422, -0.09465],
            [51.49431, -0.09531],
            [51.49437, -0.09561],
            [51.49467, -0.09707],
            [51.49472, -0.09731],
            [51.49487, -0.09802],
            [51.49487, -0.09802],
            [51.49491, -0.09821],
            [51.49494, -0.09836],
            [51.49497, -0.09851],
            [51.4951, -0.09933],
            [51.49524, -0.09981],
            [51.49536, -0.09995],
            [51.49555, -0.10006],
            [51.49564, -0.10034],
            [51.49564, -0.10078],
            [51.4956, -0.10105],
            [51.49546, -0.10114],
            [51.49506, -0.10123],
            [51.49517, -0.10165],
            [51.4953, -0.10201],
            [51.4953, -0.10201],
            [51.49543, -0.10234],
            [51.49549, -0.1026],
            [51.49558, -0.10294],
            [51.49565, -0.1032],
            [51.4958, -0.10367],
            [51.49612, -0.1047],
            [51.4962, -0.10493],
            [51.49636, -0.10539],
            [51.49647, -0.10568],
            [51.49653, -0.10583],
            [51.49653, -0.10583],
            [51.49663, -0.10609],
            [51.49715, -0.10712],
            [51.49739, -0.10759],
            [51.49758, -0.108],
            [51.49807, -0.10905],
            [51.4982, -0.10954],
            [51.4983, -0.11017],
            [51.4983, -0.11032],
            [51.49857, -0.11153],
            [51.49863, -0.11177],
            [51.49863, -0.11177],
            [51.49867, -0.11192],
            [51.49874, -0.11212],
            [51.49888, -0.11248],
            [51.49945, -0.11371],
            [51.49945, -0.11371],
            [51.49959, -0.114],
            [51.49971, -0.11424],
            [51.49983, -0.11443],
            [51.50007, -0.11474],
            [51.50035, -0.11505],
            [51.50048, -0.11534],
            [51.50056, -0.11556],
            [51.50061, -0.11568],
            [51.5007, -0.1159],
            [51.50065, -0.11601],
            [51.50046, -0.11651],
            [51.50037, -0.11676],
            [51.50043, -0.11699],
            [51.50053, -0.1172],
            [51.50074, -0.11758],
            [51.5007, -0.11793],
            [51.50071, -0.11859],
            [51.50077, -0.11899],
            [51.50078, -0.11936],
          ],
        },
        {
          mode: "foot",
          from_point_name: "St Thomas' Hospital / County Hall",
          from_point: {
            place: null,
          },
          to_point_name: "Riverside Walk, Waterloo (London)",
          to_point: {
            place: null,
          },
          destination: "",
          destination_point: {
            place: null,
          },
          line_name: "",
          duration: "00:04:00",
          departure_time: "10:54",
          arrival_time: "10:58",
          departure_datetime: "2021-07-06T10:54:00+01:00",
          arrival_datetime: "2021-07-06T10:58:00+01:00",
          coordinates: [
            [51.50078, -0.11937],
            [51.5008, -0.11985],
            [51.50093, -0.11983],
            [51.50245, -0.1196],
            [51.50285, -0.11947],
          ],
        },
      ],
      departure_time: "10:23",
      arrival_time: "10:58",
      departure_datetime: "2021-07-06T10:23:00+01:00",
      arrival_datetime: "2021-07-06T10:58:00+01:00",
    },
    {
      duration: "00:36:00",
      route_parts: [
        {
          mode: "foot",
          from_point_name: "specified point, Newington (London)",
          from_point: {
            place: null,
          },
          to_point_name: "Bricklayer's Arms",
          to_point: {
            place: null,
          },
          destination: "",
          destination_point: {
            place: null,
          },
          line_name: "",
          duration: "00:08:00",
          departure_time: "10:31",
          arrival_time: "10:39",
          departure_datetime: "2021-07-06T10:31:00+01:00",
          arrival_datetime: "2021-07-06T10:39:00+01:00",
          coordinates: [
            [51.49661, -0.08287],
            [51.4966, -0.08289],
            [51.49658, -0.08292],
            [51.49626, -0.08355],
            [51.49559, -0.08459],
            [51.49516, -0.08432],
            [51.49507, -0.08422],
            [51.49501, -0.08431],
            [51.49481, -0.08465],
            [51.49461, -0.08483],
            [51.49449, -0.08493],
            [51.49424, -0.08502],
            [51.49413, -0.08512],
            [51.49404, -0.08523],
            [51.49396, -0.08556],
            [51.49383, -0.08529],
            [51.49354, -0.08482],
            [51.49367, -0.0852],
          ],
        },
        {
          mode: "bus",
          from_point_name: "Bricklayer's Arms",
          from_point: {
            place: {
              type: "bus_stop",
              name: "Bricklayer's Arms (Stop BQ) - W-bound",
              latitude: 51.49362,
              longitude: -0.08523,
              accuracy: 20,
              atcocode: "490004315BQ",
              description: "Newington, London",
            },
          },
          to_point_name: "St Thomas' Hospital / County Hall",
          to_point: {
            place: {
              type: "bus_stop",
              name: "St Thomas' Hospital  County Hall (Stop D) - W-bound",
              latitude: 51.50072,
              longitude: -0.11937,
              accuracy: 20,
              atcocode: "490005646D",
              description: "Waterloo, London",
            },
          },
          destination: "Marylebone",
          destination_point: {
            place: null,
          },
          line_name: "453",
          duration: "00:23:00",
          departure_time: "10:39",
          arrival_time: "11:02",
          departure_datetime: "2021-07-06T10:39:00+01:00",
          arrival_datetime: "2021-07-06T11:02:00+01:00",
          coordinates: [
            [51.49367, -0.08518],
            [51.49376, -0.08543],
            [51.4938, -0.08563],
            [51.49391, -0.0862],
            [51.49407, -0.08716],
            [51.49411, -0.08897],
            [51.49411, -0.08939],
            [51.49413, -0.09019],
            [51.49413, -0.09024],
            [51.49413, -0.09024],
            [51.49414, -0.09127],
            [51.49418, -0.0918],
            [51.49417, -0.09283],
            [51.49415, -0.09415],
            [51.49422, -0.09465],
            [51.49422, -0.09465],
            [51.49431, -0.09531],
            [51.49437, -0.09561],
            [51.49467, -0.09707],
            [51.49472, -0.09731],
            [51.49487, -0.09802],
            [51.49487, -0.09802],
            [51.49491, -0.09821],
            [51.49494, -0.09836],
            [51.49497, -0.09851],
            [51.4951, -0.09933],
            [51.49524, -0.09981],
            [51.49536, -0.09995],
            [51.49555, -0.10006],
            [51.49564, -0.10034],
            [51.49564, -0.10078],
            [51.4956, -0.10105],
            [51.49546, -0.10114],
            [51.49506, -0.10123],
            [51.49517, -0.10165],
            [51.4953, -0.10201],
            [51.4953, -0.10201],
            [51.49543, -0.10234],
            [51.49549, -0.1026],
            [51.49558, -0.10294],
            [51.49565, -0.1032],
            [51.4958, -0.10367],
            [51.49612, -0.1047],
            [51.4962, -0.10493],
            [51.49636, -0.10539],
            [51.49647, -0.10568],
            [51.49653, -0.10583],
            [51.49653, -0.10583],
            [51.49663, -0.10609],
            [51.49715, -0.10712],
            [51.49739, -0.10759],
            [51.49758, -0.108],
            [51.49807, -0.10905],
            [51.4982, -0.10954],
            [51.4983, -0.11017],
            [51.4983, -0.11032],
            [51.49857, -0.11153],
            [51.49863, -0.11177],
            [51.49863, -0.11177],
            [51.49867, -0.11192],
            [51.49874, -0.11212],
            [51.49888, -0.11248],
            [51.49945, -0.11371],
            [51.49945, -0.11371],
            [51.49959, -0.114],
            [51.49971, -0.11424],
            [51.49983, -0.11443],
            [51.50007, -0.11474],
            [51.50035, -0.11505],
            [51.50048, -0.11534],
            [51.50056, -0.11556],
            [51.50061, -0.11568],
            [51.5007, -0.1159],
            [51.50065, -0.11601],
            [51.50046, -0.11651],
            [51.50037, -0.11676],
            [51.50043, -0.11699],
            [51.50053, -0.1172],
            [51.50074, -0.11758],
            [51.5007, -0.11793],
            [51.50071, -0.11859],
            [51.50077, -0.11899],
            [51.50078, -0.11936],
          ],
        },
        {
          mode: "foot",
          from_point_name: "St Thomas' Hospital / County Hall",
          from_point: {
            place: null,
          },
          to_point_name: "Riverside Walk, Waterloo (London)",
          to_point: {
            place: null,
          },
          destination: "",
          destination_point: {
            place: null,
          },
          line_name: "",
          duration: "00:04:00",
          departure_time: "11:03",
          arrival_time: "11:07",
          departure_datetime: "2021-07-06T11:03:00+01:00",
          arrival_datetime: "2021-07-06T11:07:00+01:00",
          coordinates: [
            [51.50078, -0.11937],
            [51.5008, -0.11985],
            [51.50093, -0.11983],
            [51.50245, -0.1196],
            [51.50285, -0.11947],
          ],
        },
      ],
      departure_time: "10:31",
      arrival_time: "11:07",
      departure_datetime: "2021-07-06T10:31:00+01:00",
      arrival_datetime: "2021-07-06T11:07:00+01:00",
    },
  ],
  getSearchResult: (fromPostCode, toPostCode) => {
    fetch(createAPILink(fromPostCode, toPostCode))
      .then((resp) => resp.json())
      .then((data) => {
        let usefulData = data.routes;
        usefulData.map((routes) => {
          routes.route_parts.map((part) => {
            part.coordinates = part.coordinates.map(([lan, lon]) => [lon, lan]);
          });
        });
        set({ searchResult: [...usefulData] });
      });
  },

  searchHistory: [],
  addSearchHistory: (searchResult) => {
    let newHistory = {
      fromName: "LondonEye",
      fromPostcode: "E21DF",
      toName: "GreenPark",
      toPostCode: "E21DF",
    };
    set({ searchHistory: [...get().searchHistory, newHistory] });
  },
}));

export default useStore;
